FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY agent_graph.py agent_server.py .

EXPOSE 8000

ENV PORT=8000 \
    MCP_TIME_SERVER_URL=http://mcp:8001 \
    OPENAI_MODEL=gpt-4o-mini

CMD ["python", "agent_server.py"]
